## 订单数据特点
1. 数据倾斜问题，某个商户数据可能会较大
2. 热数据：3个月内的订单数据，查询实时性较高;
3. 冷数据A：3个月 ~ 12个月前的订单数据，查询频率不高;
4. 冷数据B：1年前的订单数据，几乎不会查询，只有偶尔的查询需求;
5. 冷热数据分离

订单数据具备时间属性，存在热尾效应，大部分情况下检索的都是最近的订单，而订单表里却存储了大量使用频率较低的老数据。
那么就可以将新老数据分开存储，将历史订单移入另一张表中，并对代码中的查询模块做一些相应改动，便能有效解决数据量大的问题。

## 分库
1. 分库，通过商户编号，避免分布式事务，方便数据统计
2. 将分库编号融入到订单号中
3. 分库组：普通组，大商户组

## 订单号
订单号 = (版本号，分片编号，时间，订单编号)
YYYYMMDD_2位系统号_商户编号_主键ID_5位随机码

库号 | 表号 | 时间戳 | 机器号 | 自增序号（随机数）

## 分表策略
1. 按照时间范围分库

## 数据倾斜解决方案

## 对外提供接口
1. 支付订单号查询：商户编号 + 订单编号（系统自动生成）
2. 商户订单号查询：商户编号 + 商户订单号
3. 订单编号（系统自动生成）查询


分库分表一定有一个分表健，通过分表健路由到不同库或表，如果不是按照这个维度的查询，
两个方案：1、遍历所有库表，再分页。2、新建这个查询维度的冗余健来做分库分表（也就是说有多个维度的分库分表）

